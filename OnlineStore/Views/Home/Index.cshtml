@using System.Diagnostics
@using System.IO
@using OnlineStore.Controllers
@model List<Section>
<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Модули</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body class="wave">
    <div class="modules-container">
        <div class="modules-content">
            <h1 class="modules-h1">Интернет магазин</h1>
            <ul class="card-list">
                @for (int i = 1; i < Model.Count + 1; i++)
                {
                    <li class="@(i % 2 == 0 ? "right" : "") child card-image-0@(i)">
                        <div class="number">0@(i)</div>
                        <h2 class="card-head-text">
                            <a asp-action=Section asp-route-id=@i asp-controller="Sections">@Model[i - 1].Name</a>
                            @{
                                if (Model[i - 1].Image != null)
                                {
                                    byte[] img = new byte[Model[i - 1].Image.Data.Length];
                                    img = Model[i - 1].Image.Data;
                                    using (var fs = new FileStream($"Files/{Model[i - 1].Image.ImageName}", FileMode.Create))
                                    {
                                        fs.Write(img);
                                    }
                                    <img style='width:80px; height:60px;' src="data:image/jpeg;base64,@(Convert.ToBase64String(Model[i - 1].Image.Data))" />
                                }

                            }
                        </h2>
                        <p class="card-text">
                            @Model[i - 1].Name <br>
                            @Model[i - 1].Image?.ImageName;
                        </p>
                    </li>
                }
            </ul>

            <button class="button-show-more"><span class="button-show-more-text"> Показать еще</span></button>
        </div>

    </div>
</body>

</html>